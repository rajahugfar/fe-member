# âœ… Site Images Management - à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œ

## ğŸ‰ à¸ªà¸–à¸²à¸™à¸°: à¸à¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™

à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸¹à¸›à¸ à¸²à¸à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œà¹„à¸”à¹‰à¸£à¸±à¸šà¸à¸²à¸£à¸à¸±à¸’à¸™à¸²à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œà¹à¸¥à¹‰à¸§!

## ğŸ“‹ à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰

### 1. à¸”à¸¹à¸£à¸¹à¸›à¸ à¸²à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- à¹à¸ªà¸”à¸‡à¸£à¸¹à¸›à¸ à¸²à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹ƒà¸™à¸£à¸°à¸šà¸š
- à¸à¸£à¸­à¸‡à¸•à¸²à¸¡à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
- à¸à¸£à¸­à¸‡à¸•à¸²à¸¡à¸ªà¸–à¸²à¸™à¸° (à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™)
- à¸„à¹‰à¸™à¸«à¸²à¸”à¹‰à¸§à¸¢à¸Šà¸·à¹ˆà¸­à¸«à¸£à¸·à¸­ code

### 2. à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¸ à¸²à¸
- à¸£à¸­à¸‡à¸£à¸±à¸š JPEG, PNG, WebP, GIF
- à¸‚à¸™à¸²à¸”à¹„à¸Ÿà¸¥à¹Œà¸ªà¸¹à¸‡à¸ªà¸¸à¸” 10MB
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸‚à¸™à¸²à¸”à¸£à¸¹à¸›à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
- à¸ªà¸£à¹‰à¸²à¸‡ URL à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
- à¹€à¸à¹‡à¸šà¹„à¸Ÿà¸¥à¹Œà¹ƒà¸™ `/uploads/site-images/`

### 3. à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸¹à¸›
- à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸Šà¸·à¹ˆà¸­ (title)
- à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ code
- à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™ alt text (SEO)
- à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
- à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™

### 4. à¸¥à¸šà¸£à¸¹à¸›à¸ à¸²à¸
- à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ˆà¸²à¸ database
- à¸¥à¸šà¹„à¸Ÿà¸¥à¹Œà¸ˆà¸²à¸ disk

### 5. à¸ˆà¸±à¸”à¸à¸²à¸£à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ
- à¸”à¸¹à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
- à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™ 10 à¸«à¸¡à¸§à¸”:
  - à¹‚à¸¥à¹‚à¸à¹‰
  - à¹à¸šà¸™à¹€à¸™à¸­à¸£à¹Œ
  - à¸›à¸¸à¹ˆà¸¡
  - à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¹€à¸à¸¡
  - à¸„à¹ˆà¸²à¸¢à¹€à¸à¸¡
  - à¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™
  - à¸à¸·à¹‰à¸™à¸«à¸¥à¸±à¸‡
  - à¹à¸—à¹‡à¸š
  - à¹„à¸­à¸„à¸­à¸™
  - à¹ƒà¸šà¸£à¸±à¸šà¸£à¸­à¸‡

## ğŸ”§ API Endpoints

### Get All Images
```bash
GET /api/v1/admin/site-images
Query Parameters:
  - category_id (optional): UUID
  - is_active (optional): true/false

Response:
{
  "status": "success",
  "data": [
    {
      "id": "uuid",
      "category_id": "uuid",
      "code": "logo-main",
      "title": "Logo à¸«à¸¥à¸±à¸",
      "file_url": "http://localhost:3001/uploads/site-images/xxx.png",
      "width": 200,
      "height": 100,
      "is_active": true,
      ...
    }
  ]
}
```

### Get Categories
```bash
GET /api/v1/admin/site-images/categories

Response:
{
  "status": "success",
  "data": [
    {
      "id": "uuid",
      "code": "logo",
      "name": "à¹‚à¸¥à¹‚à¸à¹‰",
      "sort_order": 1
    }
  ]
}
```

### Upload Image
```bash
POST /api/v1/admin/site-images/upload
Content-Type: multipart/form-data

Form Data:
  - image: File (required)
  - code: String (required) - unique identifier
  - title: String (optional)
  - category_id: UUID (optional)
  - alt_text: String (optional)

Response:
{
  "status": "success",
  "message": "Image uploaded successfully",
  "data": {
    "id": "uuid",
    "code": "logo-main",
    "file_url": "http://localhost:3001/uploads/site-images/xxx.png",
    ...
  }
}
```

### Update Image
```bash
PUT /api/v1/admin/site-images/:id
Content-Type: application/json

Body:
{
  "code": "logo-main-updated",
  "title": "Logo à¸«à¸¥à¸±à¸à¹ƒà¸«à¸¡à¹ˆ",
  "alt_text": "Logo description",
  "category_id": "uuid",
  "is_active": true
}

Response:
{
  "status": "success",
  "message": "Image updated successfully",
  "data": { ... }
}
```

### Delete Image
```bash
DELETE /api/v1/admin/site-images/:id

Response:
{
  "status": "success",
  "message": "Image deleted successfully"
}
```

## ğŸ¨ Frontend Usage

### à¹€à¸‚à¹‰à¸²à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
```
URL: http://localhost:5175/admin/site-images
```

### à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œ UI
- âœ… Grid view à¹à¸ªà¸”à¸‡à¸£à¸¹à¸›à¸ à¸²à¸
- âœ… Upload modal à¸à¸£à¹‰à¸­à¸¡à¸Ÿà¸­à¸£à¹Œà¸¡
- âœ… Edit modal à¹à¸à¹‰à¹„à¸‚à¸‚à¹‰à¸­à¸¡à¸¹à¸¥
- âœ… à¸„à¹‰à¸™à¸«à¸²à¹à¸¥à¸°à¸à¸£à¸­à¸‡
- âœ… Preview à¸£à¸¹à¸›à¸ à¸²à¸
- âœ… Delete confirmation
- âœ… Responsive design

## ğŸ“ à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹„à¸Ÿà¸¥à¹Œ

### Backend
```
backend/
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â””â”€â”€ site_content.go (à¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§)
â”‚   â”‚   â””â”€â”€ repository/
â”‚   â”‚       â””â”€â”€ site_content_repository.go (à¸­à¸±à¸›à¹€à¸”à¸•)
â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â”œâ”€â”€ database/repository/
â”‚   â”‚   â”‚   â””â”€â”€ site_image_repository_impl.go (à¹ƒà¸«à¸¡à¹ˆ)
â”‚   â”‚   â””â”€â”€ repository/postgres/
â”‚   â”‚       â””â”€â”€ site_image_repository.go (à¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§ + à¸­à¸±à¸›à¹€à¸”à¸•)
â”‚   â”œâ”€â”€ usecase/admin/
â”‚   â”‚   â””â”€â”€ site_content_usecase.go (à¹ƒà¸«à¸¡à¹ˆ)
â”‚   â””â”€â”€ presentation/http/
â”‚       â”œâ”€â”€ handler/
â”‚       â”‚   â””â”€â”€ admin_site_content_handler.go (à¹ƒà¸«à¸¡à¹ˆ)
â”‚       â””â”€â”€ route/
â”‚           â””â”€â”€ routes.go (à¸­à¸±à¸›à¹€à¸”à¸•)
â””â”€â”€ uploads/
    â””â”€â”€ site-images/ (à¸ªà¸£à¹‰à¸²à¸‡à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´)
```

### Frontend
```
frontend-admin/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ siteContentAPI.ts (à¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§)
â”‚   â”œâ”€â”€ pages/admin/
â”‚   â”‚   â””â”€â”€ SiteImagesManagement.tsx (à¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§)
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ siteContent.ts (à¸¡à¸µà¸­à¸¢à¸¹à¹ˆà¹à¸¥à¹‰à¸§)
```

## ğŸ§ª à¸à¸²à¸£à¸—à¸”à¸ªà¸­à¸š

### 1. à¸—à¸”à¸ªà¸­à¸š Upload
```bash
curl -X POST http://localhost:3001/api/v1/admin/site-images/upload \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "image=@/path/to/image.png" \
  -F "code=test-logo" \
  -F "title=Test Logo"
```

### 2. à¸—à¸”à¸ªà¸­à¸š Get All
```bash
curl http://localhost:3001/api/v1/admin/site-images \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 3. à¸—à¸”à¸ªà¸­à¸š Get Categories
```bash
curl http://localhost:3001/api/v1/admin/site-images/categories \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## ğŸ” Authentication

à¸—à¸¸à¸ endpoint à¸•à¹‰à¸­à¸‡à¸¡à¸µ Authentication:
- à¹ƒà¸Šà¹‰ Admin Auth Middleware
- à¸•à¹‰à¸­à¸‡à¸¡à¸µ Bearer Token à¹ƒà¸™ Authorization header
- Token à¹„à¸”à¹‰à¸ˆà¸²à¸à¸à¸²à¸£ login à¸—à¸µà¹ˆ `/api/v1/admin/login`

## ğŸ’¾ Database

### Tables à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰
- `site_images` - à¹€à¸à¹‡à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸£à¸¹à¸›à¸ à¸²à¸
- `image_categories` - à¹€à¸à¹‡à¸šà¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆà¸£à¸¹à¸›à¸ à¸²à¸

### Indexes
- `idx_site_images_category` - category_id
- `idx_site_images_code` - code (unique)
- `idx_site_images_active` - is_active

## ğŸ¯ Use Cases

### 1. à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¹‚à¸¥à¹‚à¸à¹‰à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œ
```
1. à¹€à¸‚à¹‰à¸² /admin/site-images
2. à¸„à¸¥à¸´à¸ "à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›"
3. à¹€à¸¥à¸·à¸­à¸à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ "à¹‚à¸¥à¹‚à¸à¹‰"
4. à¹ƒà¸ªà¹ˆ code: "logo-main"
5. à¹ƒà¸ªà¹ˆà¸Šà¸·à¹ˆà¸­: "Logo à¸«à¸¥à¸±à¸"
6. à¹€à¸¥à¸·à¸­à¸à¹„à¸Ÿà¸¥à¹Œà¸£à¸¹à¸›
7. à¸„à¸¥à¸´à¸ Upload
```

### 2. à¸ˆà¸±à¸”à¸à¸²à¸£à¹à¸šà¸™à¹€à¸™à¸­à¸£à¹Œà¹‚à¸›à¸£à¹‚à¸¡à¸Šà¸±à¹ˆà¸™
```
1. à¹€à¸‚à¹‰à¸² /admin/site-images
2. à¸à¸£à¸­à¸‡à¸«à¸¡à¸§à¸”à¸«à¸¡à¸¹à¹ˆ "à¹à¸šà¸™à¹€à¸™à¸­à¸£à¹Œ"
3. à¸­à¸±à¸›à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¹à¸šà¸™à¹€à¸™à¸­à¸£à¹Œà¹ƒà¸«à¸¡à¹ˆ
4. à¹ƒà¸ªà¹ˆ code: "banner-promo-1"
5. à¹ƒà¸ªà¹ˆ alt text à¸ªà¸³à¸«à¸£à¸±à¸š SEO
```

### 3. à¸­à¸±à¸›à¹€à¸”à¸•à¸£à¸¹à¸›à¸ à¸²à¸
```
1. à¸„à¸¥à¸´à¸à¸›à¸¸à¹ˆà¸¡ Edit à¸—à¸µà¹ˆà¸£à¸¹à¸›à¸ à¸²à¸
2. à¹à¸à¹‰à¹„à¸‚à¸Šà¸·à¹ˆà¸­, code, alt text
3. à¹€à¸›à¸´à¸”/à¸›à¸´à¸”à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
4. à¸šà¸±à¸™à¸—à¸¶à¸
```

## ğŸš¨ Error Handling

### Upload Errors
- âŒ File type not allowed â†’ à¸£à¸­à¸‡à¸£à¸±à¸šà¹€à¸‰à¸à¸²à¸° JPEG, PNG, WebP, GIF
- âŒ File too large â†’ à¸‚à¸™à¸²à¸”à¸ªà¸¹à¸‡à¸ªà¸¸à¸” 10MB
- âŒ Code already exists â†’ à¹ƒà¸Šà¹‰ code à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸‹à¹‰à¸³

### Update Errors
- âŒ Image not found â†’ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š ID
- âŒ Code already exists â†’ à¹ƒà¸Šà¹‰ code à¸—à¸µà¹ˆà¹„à¸¡à¹ˆà¸‹à¹‰à¸³

### Delete Errors
- âŒ Image not found â†’ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š ID
- âš ï¸ File delete failed â†’ à¸¥à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¹à¸•à¹ˆà¹„à¸Ÿà¸¥à¹Œà¸­à¸²à¸ˆà¸¢à¸±à¸‡à¸­à¸¢à¸¹à¹ˆ

## ğŸ“ˆ Next Steps (Optional)

### à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡à¸—à¸µà¹ˆà¸­à¸²à¸ˆà¸—à¸³
1. **Image Optimization**
   - Auto resize à¸£à¸¹à¸›à¸ à¸²à¸
   - à¸ªà¸£à¹‰à¸²à¸‡ thumbnail
   - Convert à¹€à¸›à¹‡à¸™ WebP

2. **CDN Integration**
   - Upload à¹„à¸› S3/CloudFlare R2
   - à¹ƒà¸Šà¹‰ CDN URL

3. **Bulk Operations**
   - Upload à¸«à¸¥à¸²à¸¢à¸£à¸¹à¸›à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™
   - Delete à¸«à¸¥à¸²à¸¢à¸£à¸¹à¸›à¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™

4. **Image Editor**
   - Crop à¸£à¸¹à¸›à¸ à¸²à¸
   - Resize à¹ƒà¸™à¸«à¸™à¹‰à¸²à¹€à¸§à¹‡à¸š

## âœ¨ à¸ªà¸£à¸¸à¸›

à¸£à¸°à¸šà¸šà¸ˆà¸±à¸”à¸à¸²à¸£à¸£à¸¹à¸›à¸ à¸²à¸à¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œà¸à¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹à¸¥à¹‰à¸§! ğŸ‰

- âœ… Backend API à¸ªà¸¡à¸šà¸¹à¸£à¸“à¹Œ
- âœ… Frontend UI à¸à¸£à¹‰à¸­à¸¡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™
- âœ… Database schema à¸à¸£à¹‰à¸­à¸¡
- âœ… Authentication à¸„à¸£à¸šà¸–à¹‰à¸§à¸™
- âœ… Error handling à¸”à¸µ
- âœ… File upload à¸—à¸³à¸‡à¸²à¸™à¹„à¸”à¹‰

**à¸¥à¸­à¸‡à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹„à¸”à¹‰à¹€à¸¥à¸¢!** ğŸš€
